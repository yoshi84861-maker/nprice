<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤©ç©ºè—æ¯”åƒ¹å°å¹«æ‰‹</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap');
        body { 
            font-family: 'Noto Sans TC', sans-serif; 
            background-color: #f0f9ff; 
            padding: 15px;
        }
        /* å¼·èª¿æŒ‰éˆ•é¡è‰² */
        .btn-add {
            background-color: #0284c7; /* æ·±å¤©ç©ºè— */
            color: white;
            padding: 12px;
            border-radius: 10px;
            font-weight: bold;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }
        .btn-add:hover { background-color: #0369a1; }
        .btn-preview {
            background-color: #ffffff;
            color: #0284c7;
            border: 2px solid #0284c7;
            padding: 12px;
            border-radius: 10px;
            font-weight: bold;
        }
        .btn-preview:hover { background-color: #f0f9ff; }
    </style>
</head>
<body>

    <div class="max-w-4xl mx-auto">
        <div class="bg-sky-500 p-6 rounded-t-3xl shadow-lg text-white text-center">
            <h1 class="text-2xl font-bold tracking-wider">â˜ï¸ ç”¢å“æ¯”åƒ¹æ¸…å–®</h1>
            <p class="text-sky-100 text-sm mt-1">è¼•é¬†è¨˜éŒ„é€šè·¯åƒ¹æ ¼ï¼Œæ‰¾å‡ºæœ€åˆ’ç®—çš„é¸æ“‡</p>
        </div>

        <div class="bg-white p-6 shadow-md rounded-b-3xl mb-6 border border-sky-100">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-5 mb-5">
                <div>
                    <label class="block text-sm font-bold text-sky-700 mb-2">ç”¢å“åç¨±</label>
                    <input type="text" id="pName" placeholder="è¼¸å…¥ç”¢å“åç¨±" class="w-full border-sky-200 rounded-xl p-3 border outline-none focus:ring-2 focus:ring-sky-400">
                </div>
                <div>
                    <label class="block text-sm font-bold text-sky-700 mb-2">æ¯”åƒ¹é€šè·¯</label>
                    <select id="pChannel" class="w-full border-sky-200 rounded-xl p-3 border outline-none bg-white">
                        <option value="è¦çš®">è¦çš®</option>
                        <option value="momo">momo</option>
                        <option value="é…·å½­">é…·å½­</option>
                        <option value="å¯¦é«”">å¯¦é«”</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-bold text-sky-700 mb-2">æ¯”åƒ¹æ—¥æœŸ</label>
                    <input type="date" id="pDate" class="w-full border-sky-200 rounded-xl p-3 border outline-none">
                </div>
                <div>
                    <label class="block text-sm font-bold text-sky-700 mb-2">è¼¸å…¥åƒ¹æ ¼</label>
                    <input type="number" id="pPrice" placeholder="è«‹è¼¸å…¥é‡‘é¡" class="w-full border-sky-200 rounded-xl p-3 border outline-none">
                </div>
            </div>

            <div class="mb-6">
                <label class="block text-sm font-bold text-sky-700 mb-2">å•†å“ç¶²å€ (è²¼ä¸Šå¾Œå¯é»æ“Šä¸‹æ–¹é è¦½)</label>
                <input type="url" id="pUrl" placeholder="https://..." class="w-full border-sky-200 rounded-xl p-3 border outline-none">
            </div>

            <div class="flex flex-col sm:flex-row gap-4">
                <button onclick="previewLink()" class="btn-preview flex-1 transition-all">
                    ğŸ”— å‰å¾€å•†å“é é è¦½
                </button>
                <button onclick="addEntry()" class="btn-add flex-1 transition-all">
                    ğŸ’¾ åŠ å…¥æ¯”åƒ¹æ¸…å–®
                </button>
            </div>
        </div>

        <div class="bg-white rounded-3xl shadow-xl overflow-hidden border border-sky-50">
            <table class="min-w-full text-left">
                <thead class="bg-sky-50 text-sky-800 border-b border-sky-100">
                    <tr>
                        <th class="px-5 py-4 font-bold">ç”¢å“è³‡è¨Š</th>
                        <th class="px-5 py-4 font-bold">åƒ¹æ ¼</th>
                        <th class="px-5 py-4 font-bold">æ—¥æœŸ</th>
                        <th class="px-5 py-4 text-center font-bold">æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody id="priceList" class="divide-y divide-sky-50">
                    </tbody>
            </table>
        </div>
    </div>

    <script>
        // è¨­å®šé è¨­æ—¥æœŸ
        document.getElementById('pDate').valueAsDate = new Date();
        
        // å¾ç€è¦½å™¨å­˜å„²è®€å–è³‡æ–™
        let items = JSON.parse(localStorage.getItem('priceList_v2')) || [];
        renderList();

        function previewLink() {
            const url = document.getElementById('pUrl').value;
            if (url && url.startsWith('http')) {
                window.open(url, '_blank');
            } else {
                alert('è«‹è¼¸å…¥å®Œæ•´çš„ç¶²å€ (éœ€åŒ…å« http æˆ– https)');
            }
        }

        function addEntry() {
            const name = document.getElementById('pName').value;
            const channel = document.getElementById('pChannel').value;
            const date = document.getElementById('pDate').value;
            const price = document.getElementById('pPrice').value;
            const url = document.getElementById('pUrl').value;

            if (!name || !price) {
                alert('è«‹è¼¸å…¥ç”¢å“åç¨±èˆ‡åƒ¹æ ¼');
                return;
            }

            const item = { id: Date.now(), name, channel, date, price, url };
            items.unshift(item); // æœ€æ–°çš„æ’åœ¨æœ€ä¸Šé¢
            saveAndRender();
            
            // åŠ å…¥å¾Œæ¸…ç©ºè¼¸å…¥æ¡† (æ—¥æœŸä¿ç•™)
            document.getElementById('pName').value = '';
            document.getElementById('pPrice').value = '';
            document.getElementById('pUrl').value = '';
        }

        function deleteItem(id) {
            if(confirm('ç¢ºå®šè¦åˆªé™¤é€™ç­†ç´€éŒ„å—ï¼Ÿ')) {
                items = items.filter(i => i.id !== id);
                saveAndRender();
            }
        }

        function saveAndRender() {
            localStorage.setItem('priceList_v2', JSON.stringify(items));
            renderList();
        }

        function renderList() {
            const tbody = document.getElementById('priceList');
            if (items.length === 0) {
                tbody.innerHTML = `<tr><td colspan="4" class="p-10 text-center text-gray-400">ç›®å‰æ²’æœ‰è³‡æ–™ï¼Œå¿«å»æ¯”åƒ¹å§ï¼</td></tr>`;
                return;
            }
            tbody.innerHTML = items.map(i => `
                <tr class="hover:bg-sky-50/50 transition">
                    <td class="px-5 py-4">
                        <div class="font-bold text-gray-800">${i.name}</div>
                        <div class="text-xs text-sky-500 font-medium">${i.channel}</div>
                    </td>
                    <td class="px-5 py-4">
                        <span class="text-lg font-black text-sky-600">$${Number(i.price).toLocaleString()}</span>
                    </td>
                    <td class="px-5 py-4 text-sm text-gray-400">${i.date}</td>
                    <td class="px-5 py-4">
                        <div class="flex flex-col items-center gap-2">
                            ${i.url ? `<a href="${i.url}" target="_blank" class="text-xs bg-sky-100 text-sky-600 px-2 py-1 rounded hover:bg-sky-200">é–‹å•Ÿé€£çµ</a>` : ''}
                            <button onclick="deleteItem(${i.id})" class="text-xs text-red-400 hover:text-red-600">åˆªé™¤</button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }
    </script>
</body>
</html>
